autoinstall:
  version: 1
  source:
    id: ubuntu-mate-desktop-minimal
    search_drivers: true
  oem:
    install: auto
  locale: en_GB.UTF-8
  updates: security
  keyboard:
    layout: de
  drivers:
    install: true
  codecs:
    install: true
  timezone: Europe/Berlin
  identity:
    hostname: kiosksystem
    username: user
    password: $6$qBEaYNd9lxorQPqZ$hqk8MSGpklUtYEm2l/LwRdF68HXMJQInLlrQAclFBj2gRI.0eusDR1hoLXfV0X2e0y5d2/3PAG/VtYmo.msZM/
  snaps:
    - name: code
      classic: true
    - name: google-chrome
    - name: chromium
  packages:
    - curl
    - build-essential
    - ssh
    - overlayroot 
    - git 
    - git-lfs
    - net-tools
    - linux-tools-generic
    - nginx
    - xdotool
    - scrot
    - unclutter-xfixes
    - lm-sensors 
    - cpustat 
    - fping
    - mpv
  ssh:
    allow-pw: true
    authorized-keys: []
    install-server: true
  late-commands:
    - curtin in-target -- chmod 0777 /opt && mkdir -p /opt/tmp && cd /opt/tmp/ && git clone https://github.com/jewe/kiosksystem.git && cd kiosksystem && sh setup_system.sh > /opt/kiosksystem_install.log
  autoinstall:
    shutdown: reboot