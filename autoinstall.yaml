autoinstall:
  version: 1
  source:
    id: ubuntu-mate-desktop-minimal
    search_drivers: true
  oem:
    install: auto
  locale: en_GB.UTF-8
  updates: security
  keyboard:
    layout: de
  drivers:
    install: true
  codecs:
    install: true
  timezone: Europe/Berlin
  identity:
    hostname: kiosksystem
    username: user
    password: $6$qBEaYNd9lxorQPqZ$hqk8MSGpklUtYEm2l/LwRdF68HXMJQInLlrQAclFBj2gRI.0eusDR1hoLXfV0X2e0y5d2/3PAG/VtYmo.msZM/
  snaps:
    - name: code
      classic: true
    - name: chromium
  packages:
    - curl
    - build-essential
    - ssh
    - overlayroot 
    - git 
    - git-lfs
    - net-tools
    - linux-tools-generic
    - nginx
    - xdotool
    - scrot
    - unclutter-xfixes
    - lm-sensors 
    - cpustat 
    - fping
    - mpv
  ssh:
    allow-pw: true
    authorized-keys: []
    install-server: true
  late-commands:
    - curtin in-target -- apt-get remove -y ubuntu-mate-wallpapers-common ubuntu-mate-wallpapers-noble firefox libreoffice-common libreoffice-core
    - curtin in-target -- chmod 0777 /opt && mkdir -p /opt/tmp && cd /opt/tmp/ && git clone https://github.com/jewe/kiosksystem.git
  user-data: # Commands here run during first boot (cannot be interactive)
    runcmd:
      - [apt-get, remove, --yes,  ubuntu-mate-wallpapers-common]
      - |
        #!/usr/bin/env bash
        echo ''
        echo '***************************************'
        echo ' To complete install setup please run, '
        echo ' sudo sh /opt/tmp/kiosksystem/setup_system.sh'
        echo '***************************************'
        echo ''
  autoinstall:
    shutdown: reboot